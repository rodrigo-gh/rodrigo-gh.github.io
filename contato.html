<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles.css" />
    <title>Contato</title>
  </head>
  <body>
    <header class="header">
      <h1>Entre em Contato</h1>
      <p>Estamos aqui para ajudar. Envie-nos uma mensagem no WhatsApp.</p>
      <nav>
        <ul>
          <li><a href="index.html">Página Inicial</a></li>
          <li><a href="servicos.html">Serviços</a></li>
        </ul>
      </nav>
    </header>

    <section>
      <h2>Formulário de Contato</h2>
      <form id="contact-form" target="_blank">
        <label for="name">Seu Nome:</label>
        <input type="text" id="name" name="name" required />

        <label for="problem">Descreva o Problema:</label>
        <textarea id="problem" name="problem" rows="4" required></textarea>

        <!-- Adicione um campo oculto para evitar bots -->
        <input type="hidden" name="bot-field" />

        <button type="submit" id="send-button" class="whatsapp-button">
          Enviar Mensagem no WhatsApp
        </button>
      </form>
    </section>

    <script>
      // JavaScript para abrir o WhatsApp com a mensagem preenchida
      document
        .getElementById("contact-form")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Evita o envio automático do formulário

          var name = document.getElementById("name").value;
          var problem = document.getElementById("problem").value;

          // Verifica se ambos os campos estão preenchidos e não contêm caracteres especiais
          if (
            name.trim() !== "" &&
            problem.trim() !== "" &&
            isValidInput(name) &&
            isValidInput(problem)
          ) {
            var message =
              "Olá, meu nome é " +
              name +
              " e estou enfrentando o seguinte problema: " +
              problem;
            var encodedMessage = encodeURIComponent(message);
            var whatsappURL =
              "https://api.whatsapp.com/send?phone=41995820349&text=" +
              encodedMessage;
            window.location.href = whatsappURL;
          } else {
            alert("Por favor, preencha todos os campos corretamente.");
          }
        });

      // Função para validar entrada contra caracteres especiais
      function isValidInput(input) {
        var pattern = /^[a-zA-Z0-9\s]+$/; // Permite letras, números e espaços
        return pattern.test(input);
      }
    </script>
  </body>
</html>
